<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link  rel="stylesheet" href="bostrap/css/bootstrap.min.css" >

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="js/jquery-2.1.3.js"></script>
<script src="js/jspdf.js"></script>
<script src="js/pdfFromHTML.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
<link  rel="stylesheet" href="css/estili4.css" >
<link  rel="stylesheet" href="css/estilous.css" >

  <title>Document</title>
  <div class="profile">

    <h1 class="text-light"><a id="logeado"></a></h1>



</div>
</head>
<body onload="CargarInfo()"  id="main" >


<div id ="sidemenu" class="menu-expanded">

<div id="header">

<div id="title"><span></span></div>
<div id="menu-btn">

<!--<div class="btn-hamburger"></div>
<div class="btn-hamburger"></div>
<div class="btn-hamburger"></div>
-->


</div>
</div>
<div id="profile">
  <div id="photo"><img src="img/h.png" alt=""></div>
  <div id="name"><span>Administrador</span></div>
  <div class="cuadrous">
    <input type="text" name="inputname" id = "us" readonly>
  </div>
</div>


<div id ="menu-items">

<div class="item">

<a href="javascript:inicio()">

  <div class="icon"><img src="img/c.png" alt=""></div>
  <div class="mane"><span>Salir</span></div>


</a>



</div>
<div class="item">

  <a href="perfiladmin.html">

    <div class="icon"><img src="img/1.png" alt=""></div>
    <div class="mane"><span>MI Perfil</span></div>

  </a>

  </div>
  <div class="item">

    <a href="javascript:abrir()">

      <div class="icon"><img src="img/usuario.png" alt=""></div>
      <div class="mane"><span>Usuarios</span></div>

    </a>

    </div>
    <div class="item">

      <a href="solocomentarios.html">

        <div class="icon"><img src="img/comentario.png" alt=""></div>
        <div class="mane"><span>Comentarios</span></div>

      </a>

      </div>
      <div class="item">

        <a href="Cancionessolicitadas.html">

          <div class="icon"><img src="img/red.png" alt=""></div>
          <div class="mane"><span>Solicitudes</span></div>

        </a>

        </div>

        <div class="item">

          <a href="canciones.html">

            <div class="icon"><img src="img/musica.png" alt=""></div>
            <div class="mane"><span>Canciones</span></div>

          </a>

          </div>



</div>
</div>

<!--ESTE ES PARA CREAR FORMULARIO PARA CREAR NUEVO ADMINISTRADOR-->
<div class="administrador" id="admins">

<form class = "ad">

  <h2>Crear Usuario</h2>
  <input id="nombre"   type="text" class="form-control2" placeholder="Nombre" >
  <input id="apellido"  type="text" class="form-control3" placeholder="Apellido" >
  <input id="nombre_usuario"   type="text" class="form-control4" placeholder="Usuario" >
  <input id="contrasenia"  type="password" class="form-control5" placeholder="Contraseña"  >
  <input id="confirmar_contrasenia"  type="password"  class="form-control5" placeholder="ConfirmarContrasenia" ><br><br>
  <button onclick ="Registro2()"  type="button" class="btn btn-danger">Aceptar</button>
  <button onclick ="cer()"  type="button" class="btn btn-primary">Cerrar Ventana</button>

</form>


</div>
<script>
function cer(){
  document.getElementById("admins").style.display ="none";

}

</script>

<!--FIN PARA CREAR FORMULARIO PARA CREAR NUEVO ADMINISTRADOR-->
<div class="menu">

  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link" href="#"></a>
    </li>
    <li class="nav-item dropdown">
      <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Crear Nuevo usuario</a>
      <div class="dropdown-menu">
        <a class="dropdown-item"  href="#"></a>
        <a class="dropdown-item"  href="solopruebaheli.html">Crear Reportes</a>
        <a class="dropdown-item" href="index.html">Cerrar Sesion</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" href="javascript:abrir2()">Crear otro Administrador</a>
      </div>
    </li>
    <li class="nav-item">
      <a class="nav-link" href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>
    <li class="nav-item">
      <a class="nav-link " href="#"></a>
    </li>

    <li class="search-icon">
      <!--<input class="ser" id = "search"  type ="search" placeholder ="Search"/></input>
       <a href="#" class="fa fa-search"></a>
      -->
    </li>
  </ul>

</div>





<div class="ventana"   id="vent2"><h1><center>Usuarios Registrados</center></h1>

  <p><center>
    <input id="Usuario"  type="text" class="control1" placeholder="Buscar"  >

  </center></p>
  <p><center>
    <button onclick="Buscar(this)" type="button" class="btn btn-danger">Buscar</button>
</center></p>


<script>

function Buscar(){

  var username = document.querySelector('#Usuario').value


  var objeto = {
    'Usuario': username,

}
console.log(objeto)

fetch('https://musicstationbackend201700852.herokuapp.com//Buscar', {

method: 'POST',
body: JSON.stringify(objeto),
headers:{
    'Content-Type': 'application/json'
}

}).then(res => res.json())
.catch(err => {
console.error('Error:', err)
alert("Ocurrio un error, ver la consola")
})
.then(response =>{

console.log(response);
console.log(response.message)
if(response.message == "Failed"){
  alert("El Usuario que Buscas No Existe")

}else{
  alert(`Se ha encontrado el usuario, ${username}`)
  sessionStorage.setItem("buscar",username)
  location.href="modificar.html"
}
})
}









</script>













</div>

<!--AQUI VAN LOS DATOS Y LAS TABLAS-->
<!--AQUI INTENTARA CREAR EL PDF PARA EL REPORTE-->


<div class="diseño" id="vent">


  <table class="table">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Nombre</th>
        <th scope="col">Apellido</th>
        <th scope="col">Usuario</th>

        <th scope="col">Ver Informacion</th>


      </tr>
    </thead>
    <tbody id="CuerpoUsuarios">
    </tbody>
  </table>

  <script>

    function CargarInfo(){


        var nombre = document.querySelector('#logeado')
        var iniciado = sessionStorage.Usuario
        nombre.innerHTML = `Bienvenido: </br> ${iniciado}`


        var tabla = document.querySelector('#CuerpoUsuarios')
        fetch('https://musicstationbackend201700852.herokuapp.com//Datos')
        .then(response => response.json())
        .catch(error => {
            console.log(error)
          })
          .then(res => {


            for (var i in res) {
                tabla.innerHTML +=
                `<tr>
                    <th>  ${res[i].Nombre} </th>
                    <th>  ${res[i].Apellido} </th>
                    <th>  ${res[i].Usuario} </th>
                    <th> <button type="button" value="${res[i].Usuario}" onclick="verUsuario(this)" class="btn btn-primary">Ver Datos</button> </th>


                  </tr>`
                }

            })

            adminus()
          }
    </script>
     <script>

function abrir(){


document.getElementById("vent").style.display ="block";
document.getElementById("vent2").style.display ="block";
document.getElementById("admins").style.display ="none";


}


     </script>
     <script>

      function abrir2(){

      document.getElementById("admins").style.display ="block";

      document.getElementById("vent").style.display ="none";
      document.getElementById("vent2").style.display ="none";
      }

           </script>



  </div>
<!--AUI ES PARA CREAR UN NUEVO ADMINISTRADOR-->
<script>
  function verUsuario(boton){

      var Usuario = boton.value

      sessionStorage.setItem("buscar", Usuario)

      location.href="modificar.html"
  }



</script>


<!--FIN PARA CREAR UN NUEVO ADMINISTRADOR-->
<script>


  function Registro2(){

    var Nombre = document.querySelector('#nombre').value
    var Apellido = document.querySelector('#apellido').value
    var Usuario = document.querySelector('#nombre_usuario').value
    var Contrasenia = document.querySelector('#contrasenia').value
    var ConfirmarContrasenia  = document.querySelector('#confirmar_contrasenia').value


    var objeto = {
      'Nombre':Nombre,
      'Apellido':Apellido,
      'Usuario':Usuario,
      'Contrasenia':Contrasenia,
      'ConfirmarContrasenia':ConfirmarContrasenia

  }
  console.log(objeto)

  fetch('https://musicstationbackend201700852.herokuapp.com//Datosadmin', {

  method: 'POST',
  body: JSON.stringify(objeto),
  headers:{
      'Content-Type': 'application/json'
  }

}).then(res => res.json())
.catch(err => {
console.error('Error:', err)
alert("Ocurrio un error, ver la consola")
})
.then(response =>{

console.log('Success',response);
console.log(response.message)
if(response.message == "Failed"){
    alert(response.reason)

}else{
    alert(response.reason)

    //location.href="Administrador.html"
}
})
}



</script>



<!--AQUI VAN LOS DATOS Y LAS TABLAS-->
<script>


const btn =document.querySelector('#menu-btn');

const menu =document.querySelector('#sidemenu');

btn.addEventListener('click',e => {


menu.classList.toggle("menu-expanded");

menu.classList.toggle("menu-collapsed");


document.querySelector('body').classList.toggle('body-expanded');


});




</script>
<script>
function inicio(){

  location.href="index.html"
}
</script>
<!--1. AQUI ES PARA ACCEDER A LOS DATOS DEL USUARIO ADMINISTRADOR Y MOSTRALO EN PRINCIPAL-->

<script>

  function adminus(){



      var cargar = sessionStorage.Usuario


     fetch(`https://musicstationbackend201700852.herokuapp.com//Datosper/${cargar}`)
              .then(response => response.json())
              .catch(error => {
                console.log(error)
              })
              .then(res =>{
                console.log(res)


                document.querySelector('#us').value = res.Usuario




              })
        }

</script>



  <!--FIN PARA DE LA LINEA 1-->
</body>
</html>